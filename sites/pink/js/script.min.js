!function(){"use strict";function a(){var a=new google.maps.LatLng(59.93891,30.323031),b={zoom:17,center:a},c=new google.maps.Map(document.getElementById("google-map"),b),d="img/map-marker.svg",e=new google.maps.LatLng(59.938641,30.32301);new google.maps.Marker({position:e,map:c,icon:d})}var b=document.querySelector(".nav-toggle"),c=document.querySelector(".page-nav");b.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),c.classList.toggle("nav-menu-show")}),document.addEventListener("click",function(){c.classList.contains("nav-menu-show")&&c.classList.remove("nav-menu-show")});var d=document.querySelector(".slider-price"),e=document.querySelector(".slider-reviews");!function(){function a(a,b,d){for(var e=0;e<h.length;e++)c(e,a,b,d)}function b(a){[].forEach.call(a,function(a){a.classList.remove("is-slide-active")})}function c(a,c,d,e){c[a].addEventListener("click",function(){var f=e*a;d.style.transform="translate3d("+f+"%,0,0)",b(c),this.classList.add("is-slide-active")})}function f(a){var b=j.style.transform;b=b.substring(12,b.length),b=parseFloat(b),m.classList.remove("disabled"),n.classList.remove("disabled"),isNaN(b)&&(b=0),a?(b+=l,b=Math.floor(1e5*b)/1e5):(b-=l,b=Math.ceil(1e5*b)/1e5),b>=0&&(b=0,m.classList.add("disabled")),-100-l>=b&&(b=-100-l,n.classList.add("disabled")),j.style.transform="translate3d("+b+"%,0,0)"}if(d||e){var g=d.querySelector(".price-table"),h=d.querySelectorAll(".slider-pagination li"),i=-100/h.length+2;a(h,g,i),window.addEventListener("resize",function(){window.matchMedia("(min-width: 660px)").matches&&(g.style.transform="translate3d(0,0,0)",b(h),h[0].classList.add("is-slide-active"))});var j=e.querySelector(".slider-wrap"),k=e.querySelectorAll(".slider-pagination li"),l=-100/k.length;a(k,j,l);var m=e.querySelector(".prev-btn"),n=e.querySelector(".next-btn");m.addEventListener("click",function(){f(!1)}),n.addEventListener("click",function(){f(!0)})}}(),document.querySelector("#google-map")&&google.maps.event.addDomListener(window,"load",a);var f=document.querySelector("#form-contest");!function(){function a(){l.value=moment(i.value).add(j.value,"days").format("YYYY-MM-DD")}function b(){var a=Number(m.value);o.innerHTML="";for(var b=0;a>b;b++)c(b+1)}function c(a){var b=Mustache.render(n,{"comp-i":a}),c=document.createElement("div");c.classList.add("comp","form-flex-sm"),c.innerHTML=b,o.appendChild(c)}function d(a){a.parentNode.removeChild(a),m.value=m.value-1}function e(c){function d(c){var d=Number(e.value),f=e.getAttribute("id");(isNaN(d)||0>d)&&(d=0),c?d+=1:d-=1,0>d&&(d=0),e.value=d,"duration"==f&&a(),"comp-field"==f&&b()}var e=c.querySelector("input"),f=c.querySelector(".range-minus"),g=c.querySelector(".range-plus");f.addEventListener("click",function(){d(!1)}),g.addEventListener("click",function(){d(!0)})}if(f){var g=document.querySelector("#reply-success"),h=document.querySelectorAll(".btn-close");[].forEach.call(h,function(a){a.addEventListener("click",function(){this.parentNode.classList.remove("modal-up-show")})});var i=f.querySelector("#date-out"),j=f.querySelector("#duration"),k=[i,j],l=f.querySelector("#date-in");k.forEach(function(b){b.addEventListener("input",function(){a()})});var m=f.querySelector("#comp-field"),n=document.querySelector("#comp-template").innerHTML,o=f.querySelector(".comps-block");b(),m.addEventListener("input",function(){b()}),o.addEventListener("click",function(a){var b=a.target;"A"==b.tagName&&(a.preventDefault(),b=b.parentNode.parentNode,d(b))});var p=f.querySelectorAll(".input-range");[].forEach.call(p,function(a){e(a)}),function(){function a(a,b){var c=new XMLHttpRequest,d=(new Date).getTime();c.open("post","http://simonenko.su/academy/echo?"+d),c.addEventListener("readystatechange",function(){4==c.readyState&&b(c.responseText)}),c.send(a)}function b(a){if(a.type.match(/image.*/)){var b=new FileReader;b.addEventListener("load",function(b){var f=Mustache.render(e,{image:b.target.result,name:a.name}),g=document.createElement("div");g.classList.add("foto-item"),g.innerHTML=f,d.appendChild(g),g.querySelector(".foto-delete").addEventListener("click",function(a){a.preventDefault(),c(g)}),h.push({file:a,item:g})}),b.readAsDataURL(a)}}function c(a){h=h.filter(function(b){return b.item!=a}),a.parentNode.removeChild(a)}if("FormData"in window&&"FileReader"in window){var d=f.querySelector(".fotos-block"),e=document.querySelector("#foto-template").innerHTML,h=[];f.querySelector("#foto-upload").addEventListener("change",function(){for(var a=this.files,c=0;c<a.length;c++)b(a[c]);this.value=""}),f.addEventListener("submit",function(b){b.preventDefault();var c=new FormData(f);h.forEach(function(a){c.append("images",a.file)}),a(c,function(a){console.log(a),g.classList.add("modal-up-show")})})}}()}}()}();